{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\DOAN1\\\\src\\\\components\\\\Pos\\\\Payment.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as Feature from './../../actions/pos/feature';\nimport * as actionPos from '../../actions/pos';\nimport Alert from './../Table/Alert'; ///////////\n\nclass Payment extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.insertbill = () => {\n      console.log(this.props.feature.show_list_table.length);\n\n      if (typeof this.props.feature.show_list_table.length == undefined || this.props.feature.show_list_table.length == 0) {\n        this.props.confirm({\n          type: {\n            status_event: {\n              type: 'STATUS_EVENT_UPDATE_DELETE_INSERT',\n              status: {\n                status: 'success',\n                classcomponent: 'alert alert-danger',\n                text: 'Phải chọn ít nhất 1 sản phẩm',\n                display: 'show-alert'\n              }\n            }\n          }\n        });\n        setTimeout(() => {\n          this.props.confirm({\n            type: {\n              status_event: {\n                type: 'STATUS_EVENT_UPDATE_DELETE_INSERT',\n                status: {\n                  status: 'success',\n                  classcomponent: 'alert alert-success',\n                  text: 'Thêm mới dữ liệu thành công ^-^',\n                  display: 'hide-alert'\n                }\n              }\n            }\n          });\n        }, 2000);\n        return;\n      }\n\n      if (this.props.feature.idbill_default != null) {\n        var newProps = { ...this.props.feature.confirm\n        };\n        newProps.icon = 'fa fa-pencil-square-o';\n        newProps.modalBody = \"Bạn có thật sự muốn thay đổi dữ liệu này ? Dữ liệu bị thay đổi và không được hồi phục\";\n        newProps.display = 'block';\n        newProps.type = null;\n        this.props.confirm({\n          type: {\n            confirm_pos: {\n              type: 'CONFIRM_POS',\n              data: newProps\n            }\n          }\n        });\n        return;\n      }\n\n      var newCustomer = { ...this.props.feature.show_customer\n      };\n\n      if (typeof newCustomer.IdCustomer != 'undefined') {\n        newCustomer.Avatar = null;\n      }\n\n      this.props.insertBill({\n        id: this.props.feature.idbill_default,\n        table: this.props.feature.show_table,\n        customer: newCustomer,\n        menu: this.props.feature.show_list_table,\n        totalprice: this.props.feature.payment_total,\n        IdUser: this.props.user.id_staff\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row bill-action margin-bill-action\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-6 margin-payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-12 p-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      class: \"form-control\",\n      id: \"note-order\",\n      placeholder: \"Nh\\u1EADp ghi ch\\xFA h\\xF3a \\u0111\\u01A1n\",\n      rows: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-6 col-xs-6 p-1 button-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        var newProps = { ...this.props.feature.confirm\n        };\n        newProps.icon = 'fa fa-cog';\n        newProps.content = \"Bạn có muốn in biên lai sau khi thanh toán hoá đơn '\\r\\n' Bạn có thể chọn dấu x để thoát trạng thái thanh toán\";\n        newProps.display = 'block';\n        newProps.btnRight = 'Yes';\n        newProps.btnLeft = 'No';\n        newProps.title = 'Thanh toán hoá đơn';\n        newProps.type = 'print';\n        this.props.confirm({\n          type: {\n            confirm_pos: {\n              type: 'CONFIRM_POS',\n              data: newProps\n            }\n          }\n        });\n      },\n      type: \"button\",\n      class: \"btn-print\",\n      onclick: \"cms_save_table()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-credit-card\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 80\n      }\n    }), \" Thanh To\\xE1n (F9)\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-6 col-xs-6 p-1 button-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        this.insertbill();\n      },\n      type: \"button\",\n      class: \"btn-pay\",\n      onclick: \"cms_save_oder()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-floppy-o\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 78\n      }\n    }), \" L\\u01B0u (F10)\")))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"col-form-label col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 56\n      }\n    }, \"T\\u1ED5ng c\\u1ED9ng\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.props.feature.payment_total,\n      class: \"form-control total-pay\",\n      disabled: \"disabled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"col-form-label col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 56\n      }\n    }, \"Kh\\xE1ch \\u0110\\u01B0a\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => {\n        var extraMoney = Number(e.target.value) - Number(this.props.feature.payment_total);\n        this.props.extraMoney({\n          type: {\n            extra_money: {\n              type: 'EXTRA_MONEY',\n              data: extraMoney\n            },\n            guest_money: {\n              type: 'GUEST_MONEY',\n              data: e.target.value\n            }\n          }\n        });\n      },\n      type: \"text\",\n      class: \"form-control customer-pay\",\n      defaultValue: this.props.feature.guest_money,\n      placeholder: \"Nh\\u1EADp s\\u1ED1 \\u0111i\\u1EC1n kh\\xE1ch \\u0111\\u01B0a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"col-form-label col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 56\n      }\n    }, \"Ti\\u1EC1n th\\u1EEBa\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-8 excess-cash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, this.props.feature.extra_money))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    feature: state.pos,\n    user: state.user\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    extraMoney: action => {\n      dispatch(action);\n    },\n    insertBill: data => {\n      dispatch(actionPos.insertBillrequest(data));\n    },\n    confirm: action => {\n      dispatch(action);\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Payment);","map":{"version":3,"sources":["C:/Users/DELL/Desktop/DOAN1/src/components/Pos/Payment.js"],"names":["React","Component","connect","Feature","actionPos","Alert","Payment","insertbill","console","log","props","feature","show_list_table","length","undefined","confirm","type","status_event","status","classcomponent","text","display","setTimeout","idbill_default","newProps","icon","modalBody","confirm_pos","data","newCustomer","show_customer","IdCustomer","Avatar","insertBill","id","table","show_table","customer","menu","totalprice","payment_total","IdUser","user","id_staff","render","content","btnRight","btnLeft","title","e","extraMoney","Number","target","value","extra_money","guest_money","mapStateToProps","state","pos","mapDispatchToProps","dispatch","action","insertBillrequest"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,6BAAzB;AACA,OAAO,KAAKC,SAAZ,MAA2B,mBAA3B;AAEA,OAAOC,KAAP,MAAkB,kBAAlB,C,CAOA;;AACA,MAAMC,OAAN,SAAsBL,SAAtB,CAAgC;AAAA;AAAA;;AAAA,SAI9BM,UAJ8B,GAIjB,MAAK;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,eAAnB,CAAmCC,MAA/C;;AACD,UAAG,OAAO,KAAKH,KAAL,CAAWC,OAAX,CAAmBC,eAAnB,CAAmCC,MAA1C,IAAoDC,SAApD,IAAiE,KAAKJ,KAAL,CAAWC,OAAX,CAAmBC,eAAnB,CAAmCC,MAAnC,IAA6C,CAAjH,EACA;AACG,aAAKH,KAAL,CAAWK,OAAX,CAAmB;AACfC,UAAAA,IAAI,EAAG;AACHC,YAAAA,YAAY,EAAE;AACVD,cAAAA,IAAI,EAAG,mCADG;AAEVE,cAAAA,MAAM,EAAC;AACHA,gBAAAA,MAAM,EAAG,SADN;AAEHC,gBAAAA,cAAc,EAAG,oBAFd;AAGHC,gBAAAA,IAAI,EAAG,8BAHJ;AAIHC,gBAAAA,OAAO,EAAG;AAJP;AAFG;AADX;AADQ,SAAnB;AAaAC,QAAAA,UAAU,CAAC,MAAM;AACb,eAAKZ,KAAL,CAAWK,OAAX,CAAmB;AACjBC,YAAAA,IAAI,EAAG;AAACC,cAAAA,YAAY,EAAE;AACpBD,gBAAAA,IAAI,EAAG,mCADa;AAEpBE,gBAAAA,MAAM,EAAC;AACHA,kBAAAA,MAAM,EAAG,SADN;AAEHC,kBAAAA,cAAc,EAAG,qBAFd;AAGHC,kBAAAA,IAAI,EAAG,iCAHJ;AAIHC,kBAAAA,OAAO,EAAG;AAJP;AAFa;AAAf;AADU,WAAnB;AAWD,SAZO,EAYL,IAZK,CAAV;AAaE;AACJ;;AACF,UAAG,KAAKX,KAAL,CAAWC,OAAX,CAAmBY,cAAnB,IAAqC,IAAxC,EACA;AACI,YAAIC,QAAQ,GAAG,EAAC,GAAG,KAAKd,KAAL,CAAWC,OAAX,CAAmBI;AAAvB,SAAf;AACAS,QAAAA,QAAQ,CAACC,IAAT,GAAgB,uBAAhB;AACAD,QAAAA,QAAQ,CAACE,SAAT,GAAqB,uFAArB;AACAF,QAAAA,QAAQ,CAACH,OAAT,GAAmB,OAAnB;AACAG,QAAAA,QAAQ,CAACR,IAAT,GAAgB,IAAhB;AAED,aAAKN,KAAL,CAAWK,OAAX,CAAmB;AACfC,UAAAA,IAAI,EAAG;AACHW,YAAAA,WAAW,EAAG;AACdX,cAAAA,IAAI,EAAE,aADQ;AAEdY,cAAAA,IAAI,EAAGJ;AAFO;AADX;AADQ,SAAnB;AAQA;AACF;;AAEC,UAAIK,WAAW,GAAG,EAAC,GAAG,KAAKnB,KAAL,CAAWC,OAAX,CAAmBmB;AAAvB,OAAlB;;AAEA,UAAG,OAAOD,WAAW,CAACE,UAAnB,IAAiC,WAApC,EACA;AACEF,QAAAA,WAAW,CAACG,MAAZ,GAAqB,IAArB;AAED;;AAGD,WAAKtB,KAAL,CAAWuB,UAAX,CAAsB;AAElBC,QAAAA,EAAE,EAAG,KAAKxB,KAAL,CAAWC,OAAX,CAAmBY,cAFN;AAGlBY,QAAAA,KAAK,EAAG,KAAKzB,KAAL,CAAWC,OAAX,CAAmByB,UAHT;AAIlBC,QAAAA,QAAQ,EAAGR,WAJO;AAKlBS,QAAAA,IAAI,EAAG,KAAK5B,KAAL,CAAWC,OAAX,CAAmBC,eALR;AAMlB2B,QAAAA,UAAU,EAAG,KAAK7B,KAAL,CAAWC,OAAX,CAAmB6B,aANd;AAOlBC,QAAAA,MAAM,EAAG,KAAK/B,KAAL,CAAWgC,IAAX,CAAgBC;AAPP,OAAtB;AASH,KAzE6B;AAAA;;AA2E9BC,EAAAA,MAAM,GAEN;AACE,wBAGI;AAAK,MAAA,KAAK,EAAC,oCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA;AAAK,MAAA,KAAK,EAAC,yBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAU,MAAA,KAAK,EAAC,cAAhB;AAA+B,MAAA,EAAE,EAAC,YAAlC;AAA+C,MAAA,WAAW,EAAC,2CAA3D;AAAkF,MAAA,IAAI,EAAC,GAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CADJ,eAMI;AAAK,MAAA,KAAK,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,mCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACA,MAAA,OAAO,EAAI,MAAI;AACX,YAAIpB,QAAQ,GAAG,EAAC,GAAG,KAAKd,KAAL,CAAWC,OAAX,CAAmBI;AAAvB,SAAf;AACAS,QAAAA,QAAQ,CAACC,IAAT,GAAgB,WAAhB;AACAD,QAAAA,QAAQ,CAACqB,OAAT,GAAmB,gHAAnB;AACArB,QAAAA,QAAQ,CAACH,OAAT,GAAmB,OAAnB;AACAG,QAAAA,QAAQ,CAACsB,QAAT,GAAoB,KAApB;AACAtB,QAAAA,QAAQ,CAACuB,OAAT,GAAmB,IAAnB;AACAvB,QAAAA,QAAQ,CAACwB,KAAT,GAAiB,oBAAjB;AACAxB,QAAAA,QAAQ,CAACR,IAAT,GAAgB,OAAhB;AAGD,aAAKN,KAAL,CAAWK,OAAX,CAAmB;AACfC,UAAAA,IAAI,EAAG;AACHW,YAAAA,WAAW,EAAG;AACdX,cAAAA,IAAI,EAAE,aADQ;AAEdY,cAAAA,IAAI,EAAGJ;AAFO;AADX;AADQ,SAAnB;AAQF,OApBD;AAqBA,MAAA,IAAI,EAAC,QArBL;AAqBc,MAAA,KAAK,EAAC,WArBpB;AAqBgC,MAAA,OAAO,EAAC,kBArBxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAqB2D;AAAG,MAAA,KAAK,EAAC,mBAAT;AAA6B,qBAAY,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArB3D,wBADJ,CADJ,eAyBI;AAAK,MAAA,KAAK,EAAC,oCAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACA,MAAA,OAAO,EAAI,MAAI;AACX,aAAKjB,UAAL;AACH,OAHD;AAIC,MAAA,IAAI,EAAC,QAJN;AAIe,MAAA,KAAK,EAAC,SAJrB;AAI+B,MAAA,OAAO,EAAC,iBAJvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIyD;AAAG,MAAA,KAAK,EAAC,gBAAT;AAA0B,qBAAY,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJzD,oBADJ,CAzBJ,CANJ,CAFA,eA0CC;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,KAAK,EAAC,gBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAO,MAAA,KAAK,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAvC,CADH,eAEG;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAoB,MAAA,KAAK,EAAI,KAAKG,KAAL,CAAWC,OAAX,CAAmB6B,aAAhD;AAA+D,MAAA,KAAK,EAAC,wBAArE;AAA8F,MAAA,QAAQ,EAAC,UAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFH,CADJ,eAOG;AAAK,MAAA,KAAK,EAAC,gBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,KAAK,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAvC,CADJ,eAEI;AAAK,MAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACA,MAAA,QAAQ,EAAKS,CAAD,IAAK;AACb,YAAIC,UAAU,GAAGC,MAAM,CAACF,CAAC,CAACG,MAAF,CAASC,KAAV,CAAN,GAAyBF,MAAM,CAAC,KAAKzC,KAAL,CAAWC,OAAX,CAAmB6B,aAApB,CAAhD;AACA,aAAK9B,KAAL,CAAWwC,UAAX,CAAsB;AAElBlC,UAAAA,IAAI,EAAG;AAEHsC,YAAAA,WAAW,EAAG;AACVtC,cAAAA,IAAI,EAAG,aADG;AAEVY,cAAAA,IAAI,EAAGsB;AAFG,aAFX;AAMDK,YAAAA,WAAW,EAAG;AACZvC,cAAAA,IAAI,EAAG,aADK;AAEZY,cAAAA,IAAI,EAAGqB,CAAC,CAACG,MAAF,CAASC;AAFJ;AANb;AAFW,SAAtB;AAgBH,OAnBD;AAoBC,MAAA,IAAI,EAAC,MApBN;AAoBc,MAAA,KAAK,EAAC,2BApBpB;AAoBgD,MAAA,YAAY,EAAE,KAAK3C,KAAL,CAAWC,OAAX,CAAmB4C,WApBjF;AAoB+F,MAAA,WAAW,EAAC,yDApB3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CAPH,eAiCG;AAAK,MAAA,KAAK,EAAC,gBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,KAAK,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAvC,CADJ,eAEI;AAAK,MAAA,KAAK,EAAC,sBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAK7C,KAAL,CAAWC,OAAX,CAAmB2C,WADpB,CAFJ,CAjCH,CA1CD,CAHJ;AAwFD;;AAtK6B;;AAyKhC,MAAOE,eAAe,GAAGC,KAAK,IAAG;AAEhC,SAAM;AACH9C,IAAAA,OAAO,EAAG8C,KAAK,CAACC,GADb;AAEHhB,IAAAA,IAAI,EAAGe,KAAK,CAACf;AAFV,GAAN;AAIE,CANH;;AASE,MAAMiB,kBAAkB,GAAG,CAACC,QAAD,EAAWlD,KAAX,KAAoB;AAChD,SAAO;AAELwC,IAAAA,UAAU,EAAIW,MAAD,IAAW;AACzBD,MAAAA,QAAQ,CAACC,MAAD,CAAR;AACA,KAJM;AAKP5B,IAAAA,UAAU,EAAIL,IAAD,IAAS;AACfgC,MAAAA,QAAQ,CAACxD,SAAS,CAAC0D,iBAAV,CAA4BlC,IAA5B,CAAD,CAAR;AACH,KAPG;AAQJb,IAAAA,OAAO,EAAI8C,MAAD,IAAW;AACvBD,MAAAA,QAAQ,CAACC,MAAD,CAAR;AACG;AAVG,GAAP;AAaE,CAdD;;AAeF,eAAe3D,OAAO,CAACsD,eAAD,EAAiBG,kBAAjB,CAAP,CAA4CrD,OAA5C,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport {connect} from 'react-redux';\r\nimport * as Feature from './../../actions/pos/feature'\r\nimport * as actionPos from '../../actions/pos';\r\n\r\nimport Alert from './../Table/Alert'\r\n\r\n\r\n\r\n\r\n\r\n\r\n///////////\r\nclass Payment extends Component {\r\n  \r\n\r\n\r\n  insertbill = () =>{\r\n      console.log(this.props.feature.show_list_table.length)\r\n     if(typeof this.props.feature.show_list_table.length == undefined || this.props.feature.show_list_table.length == 0)\r\n     {\r\n        this.props.confirm({\r\n            type : {\r\n                status_event :{\r\n                    type : 'STATUS_EVENT_UPDATE_DELETE_INSERT',\r\n                    status:{\r\n                        status : 'success',\r\n                        classcomponent : 'alert alert-danger',\r\n                        text : 'Phải chọn ít nhất 1 sản phẩm',\r\n                        display : 'show-alert'\r\n                    }\r\n                },\r\n            }\r\n        })\r\n        setTimeout(() => {\r\n            this.props.confirm({\r\n              type : {status_event :{\r\n                type : 'STATUS_EVENT_UPDATE_DELETE_INSERT',\r\n                status:{\r\n                    status : 'success',\r\n                    classcomponent : 'alert alert-success',\r\n                    text : 'Thêm mới dữ liệu thành công ^-^',\r\n                    display : 'hide-alert'\r\n                }\r\n            }}\r\n            })\r\n          }, 2000);\r\n          return;\r\n     }\r\n    if(this.props.feature.idbill_default != null)\r\n    {\r\n        var newProps = {...this.props.feature.confirm};\r\n        newProps.icon = 'fa fa-pencil-square-o';\r\n        newProps.modalBody = \"Bạn có thật sự muốn thay đổi dữ liệu này ? Dữ liệu bị thay đổi và không được hồi phục\";\r\n        newProps.display = 'block';\r\n        newProps.type = null;\r\n        \r\n       this.props.confirm({\r\n           type : {\r\n               confirm_pos : {\r\n               type: 'CONFIRM_POS',\r\n               data : newProps\r\n           }\r\n           }\r\n       })\r\n       return;\r\n    }\r\n\r\n      var newCustomer = {...this.props.feature.show_customer};\r\n     \r\n      if(typeof newCustomer.IdCustomer != 'undefined')\r\n      {\r\n        newCustomer.Avatar = null;\r\n\r\n      }\r\n      \r\n     \r\n      this.props.insertBill({\r\n\r\n          id : this.props.feature.idbill_default,\r\n          table : this.props.feature.show_table,\r\n          customer : newCustomer,\r\n          menu : this.props.feature.show_list_table,\r\n          totalprice : this.props.feature.payment_total,\r\n          IdUser : this.props.user.id_staff\r\n      })\r\n  }\r\n \r\n  render() \r\n  \r\n  {\r\n    return (\r\n     \r\n       \r\n        <div class=\"row bill-action margin-bill-action\">\r\n\r\n        <div class=\"col-md-6 margin-payment\">\r\n            <div class=\"row\">\r\n                <div class=\"col-md-12 p-1\">\r\n                    <textarea class=\"form-control\" id=\"note-order\" placeholder=\"Nhập ghi chú hóa đơn\" rows=\"3\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div class=\"row\">\r\n                <div class=\"col-md-6 col-xs-6 p-1 button-left\">\r\n                    <button \r\n                    onClick = {()=>{\r\n                        var newProps = {...this.props.feature.confirm};\r\n                        newProps.icon = 'fa fa-cog';\r\n                        newProps.content = \"Bạn có muốn in biên lai sau khi thanh toán hoá đơn '\\r\\n' Bạn có thể chọn dấu x để thoát trạng thái thanh toán\";\r\n                        newProps.display = 'block';\r\n                        newProps.btnRight = 'Yes';\r\n                        newProps.btnLeft = 'No';\r\n                        newProps.title = 'Thanh toán hoá đơn';\r\n                        newProps.type = 'print';\r\n\r\n                        \r\n                       this.props.confirm({\r\n                           type : {\r\n                               confirm_pos : {\r\n                               type: 'CONFIRM_POS',\r\n                               data : newProps\r\n                           }\r\n                           }\r\n                       })\r\n                    }}\r\n                    type=\"button\" class=\"btn-print\" onclick=\"cms_save_table()\"><i class=\"fa fa-credit-card\" aria-hidden=\"true\"></i> Thanh Toán (F9)</button>\r\n                </div>\r\n                <div class=\"col-md-6 col-xs-6 p-1 button-right\">\r\n                    <button \r\n                    onClick = {()=>{\r\n                        this.insertbill()\r\n                    }}\r\n                     type=\"button\" class=\"btn-pay\" onclick=\"cms_save_oder()\"><i class=\"fa fa-floppy-o\" aria-hidden=\"true\"></i> Lưu (F10)</button>\r\n                </div>\r\n            </div>\r\n         </div>\r\n         <div class=\"col-md-6\">\r\n             <div class=\"row form-group\">\r\n                <label class=\"col-form-label col-md-4\"><b>Tổng cộng</b></label>\r\n                <div class=\"col-md-8\">\r\n                    <input type=\"text\"  value = {this.props.feature.payment_total} class=\"form-control total-pay\" disabled=\"disabled\"/>\r\n                </div>\r\n            </div>\r\n            <div class=\"row form-group\">\r\n                <label class=\"col-form-label col-md-4\"><b>Khách Đưa</b></label>\r\n                <div class=\"col-md-8\">\r\n                    <input \r\n                    onChange = {(e)=>{\r\n                        var extraMoney = Number(e.target.value) - Number(this.props.feature.payment_total);\r\n                        this.props.extraMoney({\r\n\r\n                            type : {\r\n                               \r\n                                extra_money : {\r\n                                    type : 'EXTRA_MONEY',\r\n                                    data : extraMoney\r\n                                  },\r\n                                  guest_money : {\r\n                                    type : 'GUEST_MONEY',\r\n                                    data : e.target.value\r\n                                  }\r\n                                  \r\n                              }\r\n                        }\r\n                    )\r\n                    }}\r\n                     type=\"text\"  class=\"form-control customer-pay\" defaultValue={this.props.feature.guest_money}  placeholder=\"Nhập số điền khách đưa\"/>\r\n                </div>\r\n            </div>\r\n            <div class=\"row form-group\">\r\n                <label class=\"col-form-label col-md-4\"><b>Tiền thừa</b></label>\r\n                <div class=\"col-md-8 excess-cash\">\r\n                {this.props.feature.extra_money}\r\n                </div>\r\n            </div>\r\n         </div>\r\n    </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nconst  mapStateToProps = state =>{\r\n  \r\n\treturn{\r\n    feature : state.pos,\r\n    user : state.user\r\n\t}\r\n  };\r\n  \r\n  \r\n  const mapDispatchToProps = (dispatch, props) =>{\r\n\treturn {\r\n\t \r\n\t  extraMoney : (action) =>{\r\n\t\tdispatch(action)\r\n\t},\r\n\tinsertBill : (data) =>{\r\n        dispatch(actionPos.insertBillrequest(data))\r\n    },\r\n    confirm : (action) =>{\r\n\t\tdispatch(action)\r\n    },\r\n    \r\n\t}\r\n  }\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Payment);"]},"metadata":{},"sourceType":"module"}